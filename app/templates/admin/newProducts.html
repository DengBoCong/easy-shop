{% extends "basic.html" %}
{% block title %}[[lang.company_name]]{% endblock %}
{% block css %}
    <link rel="stylesheet" href="[[url_for('static', filename='style/login.css')]]" type="text/css" media="all">
{% endblock %}
{% block content %}
    <main class="container" style="max-width: 1920px;margin-top: 60px;">
        <div class="row">
            <div class="col-lg-3 d-none d-lg-block">
                <div class="layui-form" style="padding: 20px 20px 0 0;">
                    <div class="layui-form-item d-flex justify-content-center">
                        <div class="layui-input-inline" style="width: 300px;">
                            <label class="text-uppercase">[[lang.products_brand]]</label>
                            <input type="text" id="product-brand" lay-verify="required" value="" class="layui-input"
                                   style="margin-top: 5px;border-color: #575759">
                        </div>
                    </div>
                    <div class="layui-form-item d-flex justify-content-center">
                        <div class="layui-input-inline" style="width: 300px;">
                            <label class="text-uppercase">[[lang.color_color]]</label>
                            <select lay-verify="required" style="margin-top: 5px;"
                                    lay-filter="edit-product-color-select" id="edit-product-color-select-id">
                                <option value="">[[lang.products_choose_color]]</option>
                                {% for color in data.colors %}
                                    <option value="[[color.EN_NAME]]">[[color.NAME if lang_type == 'zh_cn' else color.EN_NAME]]</option>
                                {% endfor %}
                                <option value="add">[[lang.common_add]]</option>
                                {% if addition.login and current_user.ROLE != "USER" and current_user.ROLE != "AGENT" %}
                                <option value="del">[[lang.common_delete]]</option>
                                {% endif %}
                            </select>
                        </div>
                    </div>
                    <div class="layui-form-item d-flex justify-content-center">
                        <div class="layui-input-inline" style="width: 300px;">
                            <label class="text-uppercase">[[lang.products_style]]</label>
                            <input type="text" id="product-style" lay-verify="required" value="" class="layui-input"
                                   style="margin-top: 5px;border-color: #575759">
                        </div>
                    </div>
                    <div class="layui-form-item d-flex justify-content-center">
                        <div class="layui-input-inline" style="width: 300px;">
                            <label class="text-uppercase">[[lang.products_description]]</label>
                            <input type="text" id="product-description" lay-verify="required" value=""
                                   class="layui-input"
                                   style="margin-top: 5px;border-color: #575759">
                        </div>
                    </div>
                    <div class="layui-form-item d-flex justify-content-center">
                        <div class="layui-input-inline" style="width: 300px;">
                            <label class="text-uppercase">[[lang.products_supplier_color]]</label>
                            <input type="text" id="product-supplier-color" lay-verify="required" value=""
                                   class="layui-input"
                                   style="margin-top: 5px;border-color: #575759">
                        </div>
                    </div>
                    <div class="layui-form-item d-flex justify-content-center">
                        <div class="layui-input-inline" style="width: 300px;">
                            <label class="text-uppercase">[[lang.products_material]]</label>
                            <input type="text" id="product-material" lay-verify="required" value="" class="layui-input"
                                   style="margin-top: 5px;border-color: #575759">
                        </div>
                    </div>
                    <div class="layui-form-item d-flex justify-content-center">
                        <div class="layui-input-inline" style="width: 300px;">
                            <label class="text-uppercase">[[lang.products_place_of_origin]]</label>
                            <input type="text" id="product-place-of-origin" lay-verify="required" value="CHINA"
                                   class="layui-input"
                                   style="margin-top: 5px;border-color: #575759">
                        </div>
                    </div>
                    <div class="layui-form-item d-flex justify-content-center">
                        <div class="layui-input-inline" style="width: 300px;">
                            <label class="text-uppercase">[[lang.products_product_number]]</label>
                            <input type="text" id="product-product-number" lay-verify="required" value=""
                                   class="layui-input"
                                   style="margin-top: 5px;border-color: #575759">
                        </div>
                    </div>
                    <div class="layui-form-item d-flex justify-content-center">
                        <div class="layui-input-inline" style="width: 300px;">
                            <label class="text-uppercase">[[lang.products_factory_code]]</label>
                            <input type="text" id="product-factory-code" lay-verify="required" value=""
                                   class="layui-input"
                                   style="margin-top: 5px;border-color: #575759">
                        </div>
                    </div>
                    <div class="layui-form-item d-flex justify-content-center">
                        <div class="layui-input-inline" style="width: 300px;">
                            <label class="text-uppercase">[[lang.products_area]]</label>
                            <select lay-verify="required" style="margin-top: 5px;"
                                    lay-filter="edit-product-area-select" id="edit-product-area-select-id">
                                <option value="">[[lang.products_choose_area]]</option>
                                <option value="public">[[lang.common_public]]</option>
                                {% for area in data.areas %}
                                    <option value="[[area.ID]]">[[area.NAME if lang_type == 'zh_cn' else
                                        area.EN_NAME]]
                                    </option>
                                {% endfor %}
                                <option value="add">[[lang.common_add]]</option>
                                {% if addition.login and current_user.ROLE != "USER" and current_user.ROLE != "AGENT" %}
                                <option value="del">[[lang.common_delete]]</option>
                                {% endif %}
                            </select>
                            <label style="color: red;font-size: 13px;">[[lang.products_check_upload_area]]</label>
                        </div>
                    </div>
                    <div class="layui-form-item d-flex justify-content-center">
                        <div class="layui-input-inline" style="width: 300px;">
                            <label class="text-uppercase">[[lang.common_staff_email]]</label>
                            <input type="email" id="product-staff-email" lay-verify="required" value=""
                                   class="layui-input"
                                   style="margin-top: 5px;border-color: #575759">
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-6 d-none d-lg-block">
                <div id="edit-product-add-img-list"></div>
                <div class="row" style="margin-top: 30px;">
                    <img src="[[url_for('static', filename='img/plusLine.png')]]"
                         style="width: 100%;border-color: #0C0C0C;cursor: pointer;object-fit: contain"
                         id="edit-product-add-img" class="rounded mx-auto d-block">
                </div>
            </div>
            <div class="col-lg-3 d-none d-lg-block">
                <div class="layui-form" style="padding: 20px 20px 0 0;">
                    <div class="layui-form-item d-flex justify-content-center">
                        <div class="layui-input-inline" style="width: 300px;">
                            <label class="text-uppercase">[[lang.products_currency]]</label>
                            <select id="product-currency" lay-verify="required" style="margin-top: 5px;">
                                <option value="">[[lang.products_choose_currency]]</option>
                                <option value="RMB">[[lang.products_price_rmb]]</option>
                                <option value="JPN">[[lang.products_price_jpn]]</option>
                                <option value="EUR">[[lang.products_price_eur]]</option>
                                <option value="USD">[[lang.products_price_usd]]</option>
                            </select>
                        </div>
                    </div>
                    {% if data.productType == 'SAMPLE' %}
                        <div class="layui-form-item d-flex justify-content-center">
                            <div class="layui-input-inline" style="width: 300px;">
                                <label class="text-uppercase">[[lang.products_price_range]]</label>
                                <div id="edit-products-add-range-block">
                                    <div class="layui-inline" style="margin-top: 5px;width: 100%">
                                        <div class="layui-input-inline" style="width: 30%;">
                                            <input type="number" name="START_NUM" autocomplete="off" class="layui-input"
                                                   value="" style="border-color: #575759">
                                        </div>
                                        <div class="layui-form-mid">-</div>
                                        <div class="layui-input-inline" style="width: 30%;">
                                            <input type="number" name="END_NUM" autocomplete="off"
                                                   value="" class="layui-input" style="border-color: #575759">
                                        </div>
                                        <div style="margin-top: 5px;float: right" class="text-uppercase">
                                            [[lang.products_qty]]
                                        </div>
                                    </div>
                                    <div class="layui-inline" style="width: 100%">
                                        <div class="layui-input-inline" style="width: 70%;margin-top: 5px;">
                                            <input type="number" name="RANGE_PRICE" class="form-control"
                                                   value="" style="border-color: #575759">
                                        </div>
                                        <div style="margin-top: 10px;float: right" class="text-uppercase">
                                            [[lang.products_price]]
                                        </div>
                                    </div>
                                </div>
                                <div class="btn btn-block text-uppercase"
                                     style="width: 100%;border-color: #575759;margin-top: 5px;"
                                     id="edit-product-add-range">
                                    [[lang.products_add_range]]
                                </div>
                            </div>
                        </div>
                    {% elif data.productType == 'REFERENCE' %}
                        <div class="layui-form-item d-flex justify-content-center">
                            <div class="layui-input-inline" style="width: 300px;">
                                <label class="text-uppercase">[[lang.products_price]]</label>
                                <input type="number" id="product-refer-price" lay-verify="required" value="" class="layui-input"
                                       style="margin-top: 5px;border-color: #575759">
                            </div>
                        </div>
                    {% endif %}
                    <div class="layui-form-item d-flex justify-content-center">
                        <div class="layui-input-inline" style="width: 300px;">
                            <label class="text-uppercase">[[lang.products_category]]</label>
                            <select lay-verify="required" style="margin-top: 5px;"
                                    lay-filter="edit-product-category-select" id="edit-product-category-select-id">
                                <option value="">[[lang.products_select_category]]</option>
                                {% for category in data.goodCategories %}
                                    <option value="[[category.ID]]">[[category.NAME if lang_type == 'zh_cn' else
                                        category.EN_NAME]]
                                    </option>
                                {% endfor %}
                                <option value="add">[[lang.common_add]]</option>
                                {% if addition.login and current_user.ROLE != "USER" and current_user.ROLE != "AGENT" %}
                                <option value="del">[[lang.common_delete]]</option>
                                {% endif %}
                            </select>
                        </div>
                    </div>
                    <div class="layui-form-item d-flex justify-content-center">
                        <div class="layui-input-inline" style="width: 300px;">
                            <label class="text-uppercase">[[lang.products_size]]</label>
                            <select xm-select="size_select" xm-select-skin="default" lay-verify="required"
                                    style="margin-top: 5px;border: 1px solid #575759" xm-select-show-count="1"
                                    lay-filter="edit-product-size-select" id="edit-product-size-select-id">
                                <option value="">[[lang.products_choose_size]]</option>
                                {% for size in data.goodSizes %}
                                    <option value="[[size.SIZE]]">
                                        [[size.SIZE]]
                                    </option>
                                {% endfor %}
                                <option value="add">[[lang.common_add]]</option>
                                {% if addition.login and current_user.ROLE != "USER" and current_user.ROLE != "AGENT" %}
                                <option value="del">[[lang.common_delete]]</option>
                                {% endif %}
                            </select>
                        </div>
                    </div>
                    <div class="layui-form-item d-flex justify-content-center">
                        <div class="layui-input-inline" style="width: 300px;">
                            <label class="text-uppercase">[[lang.products_size_chart]]</label>
                            <div class="btn btn-block text-capitalize"
                                 style="width: 100%;border-color: #575759;overflow: hidden;"
                                 id="edit-products-import-chart" data-sizeChart="">
                                [[lang.common_import_from_computer]]
                            </div>
                        </div>
                    </div>
                    <div class="layui-form-item d-flex justify-content-center">
                        <div class="layui-input-inline" style="width: 300px;">
                            <div class="btn btn-block text-uppercase" id="edit-product-preview-products"
                                 style="width: 100%;border-color: #575759">
                                [[lang.products_preview]]
                            </div>
                        </div>
                    </div>
                    <div class="layui-form-item d-flex justify-content-center">
                        <div class="layui-input-inline" style="width: 300px;">
                            <div class="btn btn-block text-uppercase" id="edit-product-publish-products"
                                 style="background-color: #323232;color: #FFFFFF;width: 100%">
                                {% if data.productType == 'SAMPLE' %}[[lang.products_publish_the_sample]]{% elif data.productType == 'DESIGN' %}[[lang.products_publish_the_design]]{% else %}[[lang.products_publish_the_reference]]{% endif %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-6 col-12 d-lg-none">
                <div id="display-img1-upload" style="display: none;"></div>
                <div class="row d-flex justify-content-center" style="margin-top: 30px;">
                    <div id="carouselExampleIndicators" class="carousel slide" data-bs-ride="carousel" style="width: 385px;">
                        <div class="carousel-indicators" id="carousel-index-btn">
                            <button type="button" data-bs-target="#carouselExampleIndicators" id="carousel-btn"
                                    data-bs-slide-to="0" class="active" aria-current="true"></button>
                        </div>
                        <div class="carousel-inner" id="carousel-index-img">
                            <div class="carousel-item active">
                                <img style="cursor: pointer;object-fit: contain;width: 100%" src="[[url_for('static', filename='img/plusLine.png')]]"
                                     class="d-block w-100 edit-product-add-img1" data-tag-first="yes">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-12 d-lg-none">
                <div class="layui-form" style="padding: 20px 0 0 0;">
                    <div class="layui-form-item d-flex justify-content-center">
                        <div style="width: 370px;">
                            <label class="text-uppercase">[[lang.products_brand]]</label>
                            <input type="text" id="product-brand1" lay-verify="required" value="" class="layui-input"
                                   style="margin-top: 5px;border-color: #575759">
                        </div>
                    </div>
                    <div class="layui-form-item d-flex justify-content-center">
                        <div style="width: 370px;">
                            <label class="text-uppercase">[[lang.color_color]]</label>
                            <select lay-verify="required" style="margin-top: 5px;"
                                    lay-filter="edit-product-color-select1" id="edit-product-color-select-id1">
                                <option value="">[[lang.products_choose_color]]</option>
                                {% for color in data.colors %}
                                    <option value="[[color.EN_NAME]]">[[color.NAME if lang_type == 'zh_cn' else color.EN_NAME]]</option>
                                {% endfor %}
                                <option value="add">[[lang.common_add]]</option>
                                {% if addition.login and current_user.ROLE != "USER" and current_user.ROLE != "AGENT" %}
                                <option value="del">[[lang.common_delete]]</option>
                                {% endif %}
                            </select>
                        </div>
                    </div>
                    <div class="layui-form-item d-flex justify-content-center">
                        <div style="width: 370px;">
                            <label class="text-uppercase">[[lang.products_style]]</label>
                            <input type="text" id="product-style1" lay-verify="required" value="" class="layui-input"
                                   style="margin-top: 5px;border-color: #575759">
                        </div>
                    </div>
                    <div class="layui-form-item d-flex justify-content-center">
                        <div style="width: 370px;">
                            <label class="text-uppercase">[[lang.products_description]]</label>
                            <input type="text" id="product-description1" lay-verify="required" value=""
                                   class="layui-input"
                                   style="margin-top: 5px;border-color: #575759">
                        </div>
                    </div>
                    <div class="layui-form-item d-flex justify-content-center">
                        <div style="width: 370px;">
                            <label class="text-uppercase">[[lang.products_supplier_color]]</label>
                            <input type="text" id="product-supplier-color1" lay-verify="required" value=""
                                   class="layui-input"
                                   style="margin-top: 5px;border-color: #575759">
                        </div>
                    </div>
                    <div class="layui-form-item d-flex justify-content-center">
                        <div style="width: 370px;">
                            <label class="text-uppercase">[[lang.products_material]]</label>
                            <input type="text" id="product-material1" lay-verify="required" value="" class="layui-input"
                                   style="margin-top: 5px;border-color: #575759">
                        </div>
                    </div>
                    <div class="layui-form-item d-flex justify-content-center">
                        <div style="width: 370px;">
                            <label class="text-uppercase">[[lang.products_place_of_origin]]</label>
                            <input type="text" id="product-place-of-origin1" lay-verify="required" value="CHINA"
                                   class="layui-input"
                                   style="margin-top: 5px;border-color: #575759">
                        </div>
                    </div>
                    <div class="layui-form-item d-flex justify-content-center">
                        <div style="width: 370px;">
                            <label class="text-uppercase">[[lang.products_product_number]]</label>
                            <input type="text" id="product-product-number1" lay-verify="required" value=""
                                   class="layui-input"
                                   style="margin-top: 5px;border-color: #575759">
                        </div>
                    </div>
                    <div class="layui-form-item d-flex justify-content-center">
                        <div style="width: 370px;">
                            <label class="text-uppercase">[[lang.products_factory_code]]</label>
                            <input type="text" id="product-factory-code1" lay-verify="required" value=""
                                   class="layui-input"
                                   style="margin-top: 5px;border-color: #575759">
                        </div>
                    </div>
                    <div class="layui-form-item d-flex justify-content-center">
                        <div style="width: 370px;">
                            <label class="text-uppercase">[[lang.products_area]]</label>
                            <select lay-verify="required" style="margin-top: 5px;"
                                    lay-filter="edit-product-area-select1" id="edit-product-area-select-id1">
                                <option value="">[[lang.products_choose_area]]</option>
                                <option value="public">[[lang.common_public]]</option>
                                {% for area in data.areas %}
                                    <option value="[[area.ID]]">[[area.NAME if lang_type == 'zh_cn' else
                                        area.EN_NAME]]
                                    </option>
                                {% endfor %}
                                <option value="add">[[lang.common_add]]</option>
                                {% if addition.login and current_user.ROLE != "USER" and current_user.ROLE != "AGENT" %}
                                <option value="del">[[lang.common_delete]]</option>
                                {% endif %}
                            </select>
                            <label style="color: red;font-size: 13px;">[[lang.products_check_upload_area]]</label>
                        </div>
                    </div>
                    <div class="layui-form-item d-flex justify-content-center">
                        <div style="width: 370px;">
                            <label class="text-uppercase">[[lang.common_staff_email]]</label>
                            <input type="text" id="product-staff-email1" lay-verify="required" value=""
                                   class="layui-input"
                                   style="margin-top: 5px;border-color: #575759">
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-12 d-lg-none">
                <div class="layui-form" style="padding: 20px 0 0 0;">
                    <div class="layui-form-item d-flex justify-content-center">
                        <div style="width: 370px;">
                            <label class="text-uppercase">[[lang.products_currency]]</label>
                            <select id="product-currency1" lay-verify="required" style="margin-top: 5px;">
                                <option value="">[[lang.products_choose_currency]]</option>
                                <option value="RMB">[[lang.products_price_rmb]]</option>
                                <option value="JPN">[[lang.products_price_jpn]]</option>
                                <option value="EUR">[[lang.products_price_eur]]</option>
                                <option value="USD">[[lang.products_price_usd]]</option>
                            </select>
                        </div>
                    </div>
                    {% if data.productType == 'SAMPLE' %}
                        <div class="layui-form-item d-flex justify-content-center">
                            <div style="width: 370px;">
                                <label class="text-uppercase">[[lang.products_price_range]]</label>
                                <div id="edit-products-add-range-block1">
                                    <div class="input-group mb-3">
                                        <input type="number" class="form-control" name="START_NUM1" value="" style="border-color: #575759;">
                                        <span class="layui-form-mid">&nbsp;&nbsp;-</span>
                                        <input type="number" class="form-control" name="END_NUM1" value="" style="border-color: #575759;">
                                        <span class="layui-form-mid">&nbsp;&nbsp;[[lang.products_qty]]</span>
                                    </div>
                                    <div class="input-group mb-3">
                                        <input type="number" class="form-control" name="RANGE_PRICE1" value="" style="border-color: #575759;width: 67%">
                                        <span class="layui-form-mid">&nbsp;&nbsp;[[lang.products_price]]</span>
                                    </div>
                                </div>
                                <div class="btn btn-block text-uppercase"
                                     style="width: 100%;border-color: #575759;margin-top: 5px;"
                                     id="edit-product-add-range1">
                                    [[lang.products_add_range]]
                                </div>
                            </div>
                        </div>
                    {% elif data.productType == 'REFERENCE' %}
                        <div class="layui-form-item d-flex justify-content-center">
                            <div style="width: 370px;">
                                <label class="text-uppercase">[[lang.products_price]]</label>
                                <input type="number" id="product-refer-price1" lay-verify="required" value="" class="layui-input"
                                       style="margin-top: 5px;border-color: #575759">
                            </div>
                        </div>
                    {% endif %}
                    <div class="layui-form-item d-flex justify-content-center">
                        <div style="width: 370px;">
                            <label class="text-uppercase">[[lang.products_category]]</label>
                            <select lay-verify="required" style="margin-top: 5px;"
                                    lay-filter="edit-product-category-select1" id="edit-product-category-select-id1">
                                <option value="">[[lang.products_select_category]]</option>
                                {% for category in data.goodCategories %}
                                    <option value="[[category.ID]]">[[category.NAME if lang_type == 'zh_cn' else
                                        category.EN_NAME]]
                                    </option>
                                {% endfor %}
                                <option value="add">[[lang.common_add]]</option>
                                {% if addition.login and current_user.ROLE != "USER" and current_user.ROLE != "AGENT" %}
                                <option value="del">[[lang.common_delete]]</option>
                                {% endif %}
                            </select>
                        </div>
                    </div>
                    <div class="layui-form-item d-flex justify-content-center">
                        <div style="width: 370px;">
                            <label class="text-uppercase">[[lang.products_size]]</label>
                            <select xm-select="size_select1" xm-select-skin="default" lay-verify="required"
                                    style="margin-top: 5px;border: 1px solid #575759" xm-select-show-count="1"
                                    lay-filter="edit-product-size-select1" id="edit-product-size-select-id1">
                                <option value="">[[lang.products_choose_size]]</option>
                                {% for size in data.goodSizes %}
                                    <option value="[[size.SIZE]]">
                                        [[size.SIZE]]
                                    </option>
                                {% endfor %}
                                <option value="add">[[lang.common_add]]</option>
                                {% if addition.login and current_user.ROLE != "USER" and current_user.ROLE != "AGENT" %}
                                <option value="del">[[lang.common_delete]]</option>
                                {% endif %}
                            </select>
                        </div>
                    </div>
                    <div class="layui-form-item d-flex justify-content-center">
                        <div style="width: 370px;">
                            <label class="text-uppercase">[[lang.products_size_chart]]</label>
                            <div class="btn btn-block text-capitalize"
                                 style="width: 100%;border-color: #575759;overflow: hidden;"
                                 id="edit-products-import-chart1" data-sizeChart="">
                                [[lang.common_import_from_computer]]
                            </div>
                        </div>
                    </div>
                    <div class="layui-form-item d-flex justify-content-center">
                        <div style="width: 370px;">
                            <div class="btn btn-block text-uppercase" id="edit-product-preview-products1"
                                 style="width: 100%;border-color: #575759">
                                [[lang.products_preview]]
                            </div>
                        </div>
                    </div>
                    <div class="layui-form-item d-flex justify-content-center">
                        <div style="width: 370px;">
                            <div class="btn btn-block text-uppercase" id="edit-product-publish-products1"
                                 style="background-color: #323232;color: #FFFFFF;width: 100%">
                                {% if data.productType == 'SAMPLE' %}
                                    [[lang.products_publish_the_sample]]{% elif data.productType == 'DESIGN' %}
                                    [[lang.products_publish_the_design]]{% else %}
                                    [[lang.products_publish_the_reference]]{% endif %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
{% endblock %}
{% block js %}
    <script>
        layui.config({
            base: '../static/' //静态资源所在路径
        }).extend({
            index: 'lib/index' //主入口模块
        }).use(['index', 'layer', 'form', 'formSelects', 'upload'], function () {
            var $ = layui.$,
                admin = layui.admin,
                form = layui.form,
                formSelects = layui.formSelects,
                upload = layui.upload,
                layer = layui.layer;

            var imgCount = 1

            $('.layui-form-select').css("border", "1px solid #575759");
            $('.xm-select-parent').css("border", "1px solid #575759");

            function deleteColorTy() {
                let tmpLoad = layer.load(2)
                admin.req({
                    method: "post",
                    url: '/api/color/get!get_color',
                    data: JSON.stringify({"langType": '[[lang_type]]'}),
                    done: function (res) {
                        layer.close(tmpLoad);
                        if (res.data.code == 0) {
                            layer.msg(res.msg, {icon: 1});

                            let tmpTextTy = '<div style="padding: 10px 25px;font-size: 14px;text-align: center"><div class="row self-a-link"><ul class="nav">' +
                                    '<li class="nav-item" style="margin-top: 8px;" id="basic_nav_search_close">' +
                                    '<i class="bi bi-x-lg" style="color: #0C0C0C"></i></li></ul></div>' +
                                    '<div class="row"><div class="layui-form" lay-filter="test2"><select id="select-id-type">';

                            for (i = 0; i < res.data.colors.length; i++) {
                                if ('[[lang_type]]' == 'zh_cn') {
                                    tmpTextTy += '<option value="' + res.data.colors[i].EN_NAME + '">' + res.data.colors[i].NAME + '</option>';
                                } else {
                                    tmpTextTy += '<option value="' + res.data.colors[i].EN_NAME + '">' + res.data.colors[i].EN_NAME + '</option>';
                                }
                            }

                            tmpTextTy += '</select></div><div class="layui-inline"><button type="button" id="edit-products-color-del-btn" class="layui-btn" ' +
                                    'style="margin-top: 20px;width: 100px;background-color: #323232;color: #FFFFFF;">[[lang.common_delete]]</button></div>' +
                                    '</div></div></div>';
                            layer.open({
                                type: 1,
                                offset: 'auto',
                                title: false,
                                id: 'delColorSelect',
                                content: tmpTextTy,
                                shade: 0,
                                area: ['370px', '200px'],
                                resize: false,
                                closeBtn: false,
                                success: function (layero, index) {
                                    $('#basic_nav_search_close').on('click', function () {
                                        layer.closeAll();
                                    });

                                    layui.form.render("select", "test2");
                                    $('.layui-form-select').css("border", "1px solid #575759");

                                    $('#edit-products-color-del-btn').on('click', function () {
                                        var tmpLoad = layer.load(2)
                                        admin.req({
                                            method: "post",
                                            url: '/api/color/delete!delete_color',
                                            data: JSON.stringify({
                                                "EN_NAME": $('#select-id-type').val(),
                                                "langType": '[[lang_type]]'
                                            }),
                                            done: function (res) {
                                                layer.close(tmpLoad);
                                                if (res.data.code == 0) {
                                                    layer.msg(res.msg, {icon: 1});
                                                    var tp = layer.load(2)
                                                    setTimeout(function(){
                                                        layer.close(tp);
                                                    },5000);
                                                    window.location.reload()
                                                } else {
                                                    layer.msg(res.msg, {icon: 2});
                                                }
                                            }
                                        });
                                    });
                                }
                            });
                        } else {
                            layer.msg(res.msg, {icon: 2});
                        }
                    }
                });
            }
            function deleteAreaTy() {
                let tmpLoad = layer.load(2)
                admin.req({
                    method: "post",
                    url: '/api/area/get!get_area',
                    data: JSON.stringify({"langType": '[[lang_type]]'}),
                    done: function (res) {
                        layer.close(tmpLoad);
                        if (res.data.code == 0) {
                            layer.msg(res.msg, {icon: 1});

                            let tmpTextTy = '<div style="padding: 10px 25px;font-size: 14px;text-align: center"><div class="row self-a-link"><ul class="nav">' +
                                    '<li class="nav-item" style="margin-top: 8px;" id="basic_nav_search_close">' +
                                    '<i class="bi bi-x-lg" style="color: #0C0C0C"></i></li></ul></div>' +
                                    '<div class="row"><div class="layui-form" lay-filter="test2"><select id="select-id-type">';

                            for (i = 0; i < res.data.areas.length; i++) {
                                if ('[[lang_type]]' == 'zh_cn') {
                                    tmpTextTy += '<option value="' + res.data.areas[i].EN_NAME + '">' + res.data.areas[i].NAME + '</option>';
                                } else {
                                    tmpTextTy += '<option value="' + res.data.areas[i].EN_NAME + '">' + res.data.areas[i].EN_NAME + '</option>';
                                }
                            }

                            tmpTextTy += '</select></div><div class="layui-inline"><button type="button" id="edit-products-color-del-btn" class="layui-btn" ' +
                                    'style="margin-top: 20px;width: 100px;background-color: #323232;color: #FFFFFF;">[[lang.common_delete]]</button></div>' +
                                    '</div></div></div>';
                            layer.open({
                                type: 1,
                                offset: 'auto',
                                title: false,
                                id: 'delAreaSelect',
                                content: tmpTextTy,
                                shade: 0,
                                area: ['370px', '200px'],
                                resize: false,
                                closeBtn: false,
                                success: function (layero, index) {
                                    $('#basic_nav_search_close').on('click', function () {
                                        layer.closeAll();
                                    });

                                    layui.form.render("select", "test2");
                                    $('.layui-form-select').css("border", "1px solid #575759");

                                    $('#edit-products-color-del-btn').on('click', function () {
                                        var tmpLoad = layer.load(2)
                                        admin.req({
                                            method: "post",
                                            url: '/api/area/delete!delete_area',
                                            data: JSON.stringify({
                                                "EN_NAME": $('#select-id-type').val(),
                                                "langType": '[[lang_type]]'
                                            }),
                                            done: function (res) {
                                                layer.close(tmpLoad);
                                                if (res.data.code == 0) {
                                                    layer.msg(res.msg, {icon: 1});
                                                    var tp = layer.load(2)
                                                    setTimeout(function(){
                                                        layer.close(tp);
                                                    },5000);
                                                    window.location.reload()
                                                } else {
                                                    layer.msg(res.msg, {icon: 2});
                                                }
                                            }
                                        });
                                    });
                                }
                            });
                        } else {
                            layer.msg(res.msg, {icon: 2});
                        }
                    }
                });
            }
            function deleteCategoryTy() {
                let tmpLoad = layer.load(2)
                admin.req({
                    method: "post",
                    url: '/api/good/get!get_good_category',
                    data: JSON.stringify({"langType": '[[lang_type]]'}),
                    done: function (res) {
                        layer.close(tmpLoad);
                        if (res.data.code == 0) {
                            layer.msg(res.msg, {icon: 1});

                            let tmpTextTy = '<div style="padding: 10px 25px;font-size: 14px;text-align: center"><div class="row self-a-link"><ul class="nav">' +
                                    '<li class="nav-item" style="margin-top: 8px;" id="basic_nav_search_close">' +
                                    '<i class="bi bi-x-lg" style="color: #0C0C0C"></i></li></ul></div>' +
                                    '<div class="row"><div class="layui-form" lay-filter="test2"><select id="select-id-type">';

                            for (i = 0; i < res.data.good_categories.length; i++) {
                                if ('[[lang_type]]' == 'zh_cn') {
                                    tmpTextTy += '<option value="' + res.data.good_categories[i].EN_NAME + '">' + res.data.good_categories[i].NAME + '</option>';
                                } else {
                                    tmpTextTy += '<option value="' + res.data.good_categories[i].EN_NAME + '">' + res.data.good_categories[i].EN_NAME + '</option>';
                                }
                            }

                            tmpTextTy += '</select></div><div class="layui-inline"><button type="button" id="edit-products-color-del-btn" class="layui-btn" ' +
                                    'style="margin-top: 20px;width: 100px;background-color: #323232;color: #FFFFFF;">[[lang.common_delete]]</button></div>' +
                                    '</div></div></div>';
                            layer.open({
                                type: 1,
                                offset: 'auto',
                                title: false,
                                id: 'delCategorySelect',
                                content: tmpTextTy,
                                shade: 0,
                                area: ['370px', '200px'],
                                resize: false,
                                closeBtn: false,
                                success: function (layero, index) {
                                    $('#basic_nav_search_close').on('click', function () {
                                        layer.closeAll();
                                    });

                                    layui.form.render("select", "test2");
                                    $('.layui-form-select').css("border", "1px solid #575759");

                                    $('#edit-products-color-del-btn').on('click', function () {
                                        var tmpLoad = layer.load(2)
                                        admin.req({
                                            method: "post",
                                            url: '/api/good/delete!delete_good_category',
                                            data: JSON.stringify({
                                                "EN_NAME": $('#select-id-type').val(),
                                                "langType": '[[lang_type]]'
                                            }),
                                            done: function (res) {
                                                layer.close(tmpLoad);
                                                if (res.data.code == 0) {
                                                    layer.msg(res.msg, {icon: 1});
                                                    var tp = layer.load(2)
                                                    setTimeout(function(){
                                                        layer.close(tp);
                                                    },5000);
                                                    window.location.reload()
                                                } else {
                                                    layer.msg(res.msg, {icon: 2});
                                                }
                                            }
                                        });
                                    });
                                }
                            });
                        } else {
                            layer.msg(res.msg, {icon: 2});
                        }
                    }
                });
            }
            function deleteGoodSizeTy() {
                let tmpLoad = layer.load(2)
                admin.req({
                    method: "post",
                    url: '/api/good/get!get_good_size',
                    data: JSON.stringify({"langType": '[[lang_type]]'}),
                    done: function (res) {
                        layer.close(tmpLoad);
                        if (res.data.code == 0) {
                            layer.msg(res.msg, {icon: 1});

                            let tmpTextTy = '<div style="padding: 10px 25px;font-size: 14px;text-align: center"><div class="row self-a-link"><ul class="nav">' +
                                    '<li class="nav-item" style="margin-top: 8px;" id="basic_nav_search_close">' +
                                    '<i class="bi bi-x-lg" style="color: #0C0C0C"></i></li></ul></div>' +
                                    '<div class="row"><div class="layui-form" lay-filter="test2"><select id="select-id-type">';

                            for (i = 0; i < res.data.good_sizes.length; i++) {
                                if ('[[lang_type]]' == 'zh_cn') {
                                    tmpTextTy += '<option value="' + res.data.good_sizes[i].SIZE + '">' + res.data.good_sizes[i].SIZE + '</option>';
                                } else {
                                    tmpTextTy += '<option value="' + res.data.good_sizes[i].SIZE + '">' + res.data.good_sizes[i].SIZE + '</option>';
                                }
                            }

                            tmpTextTy += '</select></div><div class="layui-inline"><button type="button" id="edit-products-color-del-btn" class="layui-btn" ' +
                                    'style="margin-top: 20px;width: 100px;background-color: #323232;color: #FFFFFF;">[[lang.common_delete]]</button></div>' +
                                    '</div></div></div>';
                            layer.open({
                                type: 1,
                                offset: 'auto',
                                title: false,
                                id: 'delGoodSizeSelect',
                                content: tmpTextTy,
                                shade: 0,
                                area: ['370px', '200px'],
                                resize: false,
                                closeBtn: false,
                                success: function (layero, index) {
                                    $('#basic_nav_search_close').on('click', function () {
                                        layer.closeAll();
                                    });

                                    layui.form.render("select", "test2");
                                    $('.layui-form-select').css("border", "1px solid #575759");

                                    $('#edit-products-color-del-btn').on('click', function () {
                                        var tmpLoad = layer.load(2)
                                        admin.req({
                                            method: "post",
                                            url: '/api/good/delete!delete_good_size',
                                            data: JSON.stringify({
                                                "SIZE": $('#select-id-type').val(),
                                                "langType": '[[lang_type]]'
                                            }),
                                            done: function (res) {
                                                layer.close(tmpLoad);
                                                if (res.data.code == 0) {
                                                    layer.msg(res.msg, {icon: 1});
                                                    var tp = layer.load(2)
                                                    setTimeout(function(){
                                                        layer.close(tp);
                                                    },5000);
                                                    window.location.reload()
                                                } else {
                                                    layer.msg(res.msg, {icon: 2});
                                                }
                                            }
                                        });
                                    });
                                }
                            });
                        } else {
                            layer.msg(res.msg, {icon: 2});
                        }
                    }
                });
            }

            form.on('select(edit-product-color-select)', function (data) {
                if (data.value == "add") {
                    layer.open({
                        type: 1,
                        offset: 'auto',
                        title: false,
                        id: 'navColorSelect',
                        content: '<div style="padding: 10px 25px;font-size: 14px;text-align: center"><div class="row self-a-link"><ul class="nav">' +
                            '<li class="nav-item" style="margin-top: 8px;" id="basic_nav_search_close">' +
                            '<i class="bi bi-x-lg" style="color: #0C0C0C"></i></li></ul></div>' +
                            '<div class="row"><div class="layui-inline"><div class="layui-input-inline" style="width: 150px;">' +
                            '<input type="text" id="add-color-zh-name" placeholder="[[lang.common_zh_name]]" autocomplete="off" class="layui-input"></div>' +
                            '<div class="layui-input-inline" style="width: 150px;float: right">' +
                            '<input type="text" id="add-color-en-name" placeholder="[[lang.common_en_name]]" autocomplete="off" class="layui-input"></div>' +
                            '<button type="button" id="edit-products-color-add-btn" class="layui-btn layui-btn-primary" ' +
                            'style="margin-top: 20px;width: 100px;background-color: #323232;color: #FFFFFF;">[[lang.common_add]]</button></div>' +
                            '</div></div></div>',
                        shade: 0,
                        area: ['370px', '150px'],
                        resize: false,
                        closeBtn: false,
                        success: function (layero, index) {
                            $('#basic_nav_search_close').on('click', function () {
                                layer.closeAll();
                            });

                            $('#edit-products-color-add-btn').on('click', function () {
                                var zhName = $('#add-color-zh-name').val()
                                var enName = $('#add-color-en-name').val()

                                if (zhName == "" || enName == "") {
                                    layer.msg('[[lang.common_complete_info]]', {icon: 4});
                                } else {
                                    var tmpLoad = layer.load(2)
                                    admin.req({
                                        method: "post",
                                        url: '/api/color/add!add_color',
                                        data: JSON.stringify({
                                            "NAME": $('#add-color-zh-name').val(),
                                            "EN_NAME": $('#add-color-en-name').val(),
                                            "langType": '[[lang_type]]'
                                        }),
                                        done: function (res) {
                                            layer.close(tmpLoad);
                                            if (res.data.code == 0) {
                                                layer.msg(res.msg, {icon: 1});
                                                $('#edit-product-color-select-id').empty()
                                                $('#edit-product-color-select-id').append(new Option('[[lang.products_choose_color]]', ''));
                                                $('#edit-product-color-select-id').append(new Option('[[lang.common_public]]', 'public'));
                                                for (i = 0; i < res.data.colors.length; i++) {
                                                    if ('[[lang_type]]' == 'zh_cn') {
                                                        $('#edit-product-color-select-id').append(new Option(res.data.colors[i].NAME, res.data.colors[i].EN_NAME));
                                                    } else {
                                                        $('#edit-product-color-select-id').append(new Option(res.data.colors[i].EN_NAME, res.data.colors[i].EN_NAME));
                                                    }
                                                }
                                                $('#edit-product-color-select-id').append(new Option('[[lang.common_add]]', 'add'));
                                                {% if addition.login and current_user.ROLE != "USER" and current_user.ROLE != "AGENT" %}
                                                $('#edit-product-color-select-id').append(new Option('[[lang.common_delete]]', 'del'));
                                                {% endif %}
                                                layui.form.render("select");
                                                $('.layui-form-select').css("border", "1px solid #575759");
                                                layer.closeAll();
                                            } else {
                                                layer.msg(res.msg, {icon: 2});
                                            }
                                        }
                                    });
                                }
                            });
                        }
                    });
                } else if (data.value == "del") {
                    deleteColorTy()
                }
            });
            form.on('select(edit-product-color-select1)', function (data) {
                if (data.value == "add") {
                    layer.open({
                        type: 1,
                        offset: 'auto',
                        title: false,
                        id: 'navColorSelect1',
                        content: '<div style="padding: 10px 25px;font-size: 14px;text-align: center"><div class="row self-a-link"><ul class="nav">' +
                            '<li class="nav-item" style="margin-top: 8px;" id="basic_nav_search_close">' +
                            '<i class="bi bi-x-lg" style="color: #0C0C0C"></i></li></ul></div>' +
                            '<div class="row"><div class="layui-inline"><div class="layui-input-inline" style="width: 150px;">' +
                            '<input type="text" id="add-color-zh-name" placeholder="[[lang.common_zh_name]]" autocomplete="off" class="layui-input"></div>' +
                            '<div class="layui-input-inline" style="width: 150px;float: right">' +
                            '<input type="text" id="add-color-en-name" placeholder="[[lang.common_en_name]]" autocomplete="off" class="layui-input"></div>' +
                            '<button type="button" id="edit-products-color-add-btn" class="layui-btn layui-btn-primary" ' +
                            'style="margin-top: 20px;width: 100px;background-color: #323232;color: #FFFFFF;">[[lang.common_add]]</button></div>' +
                            '</div></div></div>',
                        shade: 0,
                        area: ['370px', '150px'],
                        resize: false,
                        closeBtn: false,
                        success: function (layero, index) {
                            $('#basic_nav_search_close').on('click', function () {
                                layer.closeAll();
                            });

                            $('#edit-products-color-add-btn').on('click', function () {
                                var zhName = $('#add-color-zh-name').val()
                                var enName = $('#add-color-en-name').val()

                                if (zhName == "" || enName == "") {
                                    layer.msg('[[lang.common_complete_info]]', {icon: 4});
                                } else {
                                    var tmpLoad = layer.load(2)
                                    admin.req({
                                        method: "post",
                                        url: '/api/color/add!add_color',
                                        data: JSON.stringify({
                                            "NAME": $('#add-color-zh-name').val(),
                                            "EN_NAME": $('#add-color-en-name').val(),
                                            "langType": '[[lang_type]]'
                                        }),
                                        done: function (res) {
                                            layer.close(tmpLoad);
                                            if (res.data.code == 0) {
                                                layer.msg(res.msg, {icon: 1});
                                                $('#edit-product-color-select-id1').empty()
                                                $('#edit-product-color-select-id1').append(new Option('[[lang.products_choose_color]]', ''));
                                                $('#edit-product-color-select-id1').append(new Option('[[lang.common_public]]', 'public'));
                                                for (i = 0; i < res.data.colors.length; i++) {
                                                    if ('[[lang_type]]' == 'zh_cn') {
                                                        $('#edit-product-color-select-id1').append(new Option(res.data.colors[i].NAME, res.data.colors[i].EN_NAME));
                                                    } else {
                                                        $('#edit-product-color-select-id1').append(new Option(res.data.colors[i].EN_NAME, res.data.colors[i].EN_NAME));
                                                    }
                                                }
                                                $('#edit-product-color-select-id1').append(new Option('[[lang.common_add]]', 'add'));
                                                {% if addition.login and current_user.ROLE != "USER" and current_user.ROLE != "AGENT" %}
                                                $('#edit-product-color-select-id1').append(new Option('[[lang.common_delete]]', 'del'));
                                                {% endif %}
                                                layui.form.render("select");
                                                $('.layui-form-select').css("border", "1px solid #575759");
                                                layer.closeAll();
                                            } else {
                                                layer.msg(res.msg, {icon: 2});
                                            }
                                        }
                                    });
                                }
                            });
                        }
                    });
                } else if (data.value == "del") {
                    deleteColorTy()
                }
            });

            form.on('select(edit-product-area-select)', function (data) {
                if (data.value == "add") {
                    layer.open({
                        type: 1,
                        offset: 'auto',
                        title: false,
                        id: 'navAreaSelect',
                        content: '<div style="padding: 10px 25px;font-size: 14px;text-align: center"><div class="row self-a-link"><ul class="nav">' +
                            '<li class="nav-item" style="margin-top: 8px;" id="basic_nav_search_close">' +
                            '<i class="bi bi-x-lg" style="color: #0C0C0C"></i></li></ul></div>' +
                            '<div class="row"><div class="layui-inline"><div class="layui-input-inline" style="width: 150px;">' +
                            '<input type="text" id="add-area-zh-name" placeholder="[[lang.common_zh_name]]" autocomplete="off" class="layui-input"></div>' +
                            '<div class="layui-input-inline" style="width: 150px;float: right">' +
                            '<input type="text" id="add-area-en-name" placeholder="[[lang.common_en_name]]" autocomplete="off" class="layui-input"></div>' +
                            '<button type="button" id="edit-products-area-add-btn" class="layui-btn layui-btn-primary" ' +
                            'style="margin-top: 20px;width: 100px;background-color: #323232;color: #FFFFFF;">[[lang.common_add]]</button></div>' +
                            '</div></div></div>',
                        shade: 0,
                        area: ['370px', '150px'],
                        resize: false,
                        closeBtn: false,
                        success: function (layero, index) {
                            $('#basic_nav_search_close').on('click', function () {
                                layer.closeAll();
                            });

                            $('#edit-products-area-add-btn').on('click', function () {
                                var zhName = $('#add-area-zh-name').val()
                                var enName = $('#add-area-en-name').val()

                                if (zhName == "" || enName == "") {
                                    layer.msg('[[lang.common_complete_info]]', {icon: 4});
                                } else {
                                    var tmpLoad = layer.load(2)
                                    admin.req({
                                        method: "post",
                                        url: '/api/area/add!add_area',
                                        data: JSON.stringify({
                                            "NAME": $('#add-area-zh-name').val(),
                                            "EN_NAME": $('#add-area-en-name').val(),
                                            "langType": '[[lang_type]]'
                                        }),
                                        done: function (res) {
                                            layer.close(tmpLoad);
                                            if (res.data.code == 0) {
                                                layer.msg(res.msg, {icon: 1});
                                                $('#edit-product-area-select-id').empty()
                                                $('#edit-product-area-select-id').append(new Option('[[lang.products_choose_area]]', ''));
                                                $('#edit-product-area-select-id').append(new Option('[[lang.common_public]]', 'public'));
                                                for (i = 0; i < res.data.areas.length; i++) {
                                                    if ('[[lang_type]]' == 'zh_cn') {
                                                        $('#edit-product-area-select-id').append(new Option(res.data.areas[i].NAME, res.data.areas[i].ID));
                                                    } else {
                                                        $('#edit-product-area-select-id').append(new Option(res.data.areas[i].EN_NAME, res.data.areas[i].ID));
                                                    }
                                                }
                                                $('#edit-product-area-select-id').append(new Option('[[lang.common_add]]', 'add'));
                                                {% if addition.login and current_user.ROLE != "USER" and current_user.ROLE != "AGENT" %}
                                                $('#edit-product-area-select-id').append(new Option('[[lang.common_delete]]', 'del'));
                                                {% endif %}
                                                layui.form.render("select");
                                                $('.layui-form-select').css("border", "1px solid #575759");
                                                layer.closeAll();
                                            } else {
                                                layer.msg(res.msg, {icon: 2});
                                            }
                                        }
                                    });
                                }
                            });
                        }
                    });
                } else if (data.value == "del") {
                    deleteAreaTy()
                }
            });
            form.on('select(edit-product-area-select1)', function (data) {
                if (data.value == "add") {
                    layer.open({
                        type: 1,
                        offset: 'auto',
                        title: false,
                        id: 'navAreaSelect1',
                        content: '<div style="padding: 10px 25px;font-size: 14px;text-align: center"><div class="row self-a-link"><ul class="nav">' +
                            '<li class="nav-item" style="margin-top: 8px;" id="basic_nav_search_close">' +
                            '<i class="bi bi-x-lg" style="color: #0C0C0C"></i></li></ul></div>' +
                            '<div class="row"><div class="layui-inline"><div class="layui-input-inline" style="width: 150px;">' +
                            '<input type="text" id="add-area-zh-name" placeholder="[[lang.common_zh_name]]" autocomplete="off" class="layui-input"></div>' +
                            '<div class="layui-input-inline" style="width: 150px;float: right">' +
                            '<input type="text" id="add-area-en-name" placeholder="[[lang.common_en_name]]" autocomplete="off" class="layui-input"></div>' +
                            '<button type="button" id="edit-products-area-add-btn" class="layui-btn layui-btn-primary" ' +
                            'style="margin-top: 20px;width: 100px;background-color: #323232;color: #FFFFFF;">[[lang.common_add]]</button></div>' +
                            '</div></div></div>',
                        shade: 0,
                        area: ['370px', '150px'],
                        resize: false,
                        closeBtn: false,
                        success: function (layero, index) {
                            $('#basic_nav_search_close').on('click', function () {
                                layer.closeAll();
                            });

                            $('#edit-products-area-add-btn').on('click', function () {
                                var zhName = $('#add-area-zh-name').val()
                                var enName = $('#add-area-en-name').val()

                                if (zhName == "" || enName == "") {
                                    layer.msg('[[lang.common_complete_info]]', {icon: 4});
                                } else {
                                    var tmpLoad = layer.load(2)
                                    admin.req({
                                        method: "post",
                                        url: '/api/area/add!add_area',
                                        data: JSON.stringify({
                                            "NAME": $('#add-area-zh-name').val(),
                                            "EN_NAME": $('#add-area-en-name').val(),
                                            "langType": '[[lang_type]]'
                                        }),
                                        done: function (res) {
                                            layer.close(tmpLoad);
                                            if (res.data.code == 0) {
                                                layer.msg(res.msg, {icon: 1});
                                                $('#edit-product-area-select-id1').empty()
                                                $('#edit-product-area-select-id1').append(new Option('[[lang.products_choose_area]]', ''));
                                                $('#edit-product-area-select-id1').append(new Option('[[lang.common_public]]', 'public'));
                                                for (i = 0; i < res.data.areas.length; i++) {
                                                    if ('[[lang_type]]' == 'zh_cn') {
                                                        $('#edit-product-area-select-id1').append(new Option(res.data.areas[i].NAME, res.data.areas[i].ID));
                                                    } else {
                                                        $('#edit-product-area-select-id1').append(new Option(res.data.areas[i].EN_NAME, res.data.areas[i].ID));
                                                    }
                                                }
                                                $('#edit-product-area-select-id1').append(new Option('[[lang.common_add]]', 'add'));
                                                {% if addition.login and current_user.ROLE != "USER" and current_user.ROLE != "AGENT" %}
                                                $('#edit-product-area-select-id1').append(new Option('[[lang.common_delete]]', 'del'));
                                                {% endif %}
                                                layui.form.render("select");
                                                $('.layui-form-select').css("border", "1px solid #575759");
                                                layer.closeAll();
                                            } else {
                                                layer.msg(res.msg, {icon: 2});
                                            }
                                        }
                                    });
                                }
                            });
                        }
                    });
                } else if (data.value == "del") {
                    deleteAreaTy()
                }
            });

            form.on('select(edit-product-category-select)', function (data) {
                if (data.value == "add") {
                    layer.open({
                        type: 1,
                        offset: 'auto',
                        title: false,
                        id: 'navCategorySelect',
                        content: '<div style="padding: 10px 25px;font-size: 14px;text-align: center"><div class="row self-a-link"><ul class="nav">' +
                            '<li class="nav-item" style="margin-top: 8px;" id="basic_nav_search_close">' +
                            '<i class="bi bi-x-lg" style="color: #0C0C0C"></i></li></ul></div>' +
                            '<div class="row"><div class="layui-inline"><div class="layui-input-inline" style="width: 150px;">' +
                            '<input type="text" id="add-category-zh-name" placeholder="[[lang.common_zh_name]]" autocomplete="off" class="layui-input"></div>' +
                            '<div class="layui-input-inline" style="width: 150px;float: right">' +
                            '<input type="text" id="add-category-en-name" placeholder="[[lang.common_en_name]]" autocomplete="off" class="layui-input"></div>' +
                            '<button type="button" id="edit-products-category-add-btn" class="layui-btn layui-btn-primary" ' +
                            'style="margin-top: 20px;width: 100px;background-color: #323232;color: #FFFFFF;">[[lang.common_add]]</button></div>' +
                            '</div></div></div>',
                        shade: 0,
                        area: ['370px', '150px'],
                        resize: false,
                        closeBtn: false,
                        success: function (layero, index) {
                            $('#basic_nav_search_close').on('click', function () {
                                layer.closeAll();
                            });

                            $('#edit-products-category-add-btn').on('click', function () {
                                var zhName = $('#add-category-zh-name').val()
                                var enName = $('#add-category-en-name').val()

                                if (zhName == "" || enName == "") {
                                    layer.msg('[[lang.common_complete_info]]', {icon: 4});
                                } else {
                                    var tmpLoad = layer.load(2)
                                    admin.req({
                                        method: "post",
                                        url: '/api/good/add!add_good_category',
                                        data: JSON.stringify({
                                            "NAME": $('#add-category-zh-name').val(),
                                            "EN_NAME": $('#add-category-en-name').val(),
                                            "langType": '[[lang_type]]'
                                        }),
                                        done: function (res) {
                                            layer.close(tmpLoad)
                                            if (res.data.code == 0) {
                                                layer.msg(res.msg, {icon: 1});
                                                $('#edit-product-category-select-id').empty()
                                                $('#edit-product-category-select-id').append(new Option('[[lang.products_select_category]]', ''));
                                                for (i = 0; i < res.data.goodCategories.length; i++) {
                                                    if ('[[lang_type]]' == 'zh_cn') {
                                                        $('#edit-product-category-select-id').append(new Option(res.data.goodCategories[i].NAME, res.data.goodCategories[i].ID));
                                                    } else {
                                                        $('#edit-product-category-select-id').append(new Option(res.data.goodCategories[i].EN_NAME, res.data.goodCategories[i].ID));
                                                    }
                                                }
                                                $('#edit-product-category-select-id').append(new Option('[[lang.common_add]]', 'add'));
                                                {% if addition.login and current_user.ROLE != "USER" and current_user.ROLE != "AGENT" %}
                                                $('#edit-product-category-select-id').append(new Option('[[lang.common_delete]]', 'del'));
                                                {% endif %}
                                                layui.form.render("select");
                                                $('.layui-form-select').css("border", "1px solid #575759");
                                                layer.closeAll();
                                            } else {
                                                layer.msg(res.msg, {icon: 2});
                                            }
                                        }
                                    });
                                }
                            });
                        }
                    });
                } else if (data.value == "del") {
                    deleteCategoryTy()
                }
            });
            form.on('select(edit-product-category-select1)', function (data) {
                if (data.value == "add") {
                    layer.open({
                        type: 1,
                        offset: 'auto',
                        title: false,
                        id: 'navCategorySelect1',
                        content: '<div style="padding: 10px 25px;font-size: 14px;text-align: center"><div class="row self-a-link"><ul class="nav">' +
                            '<li class="nav-item" style="margin-top: 8px;" id="basic_nav_search_close">' +
                            '<i class="bi bi-x-lg" style="color: #0C0C0C"></i></li></ul></div>' +
                            '<div class="row"><div class="layui-inline"><div class="layui-input-inline" style="width: 150px;">' +
                            '<input type="text" id="add-category-zh-name" placeholder="[[lang.common_zh_name]]" autocomplete="off" class="layui-input"></div>' +
                            '<div class="layui-input-inline" style="width: 150px;float: right">' +
                            '<input type="text" id="add-category-en-name" placeholder="[[lang.common_en_name]]" autocomplete="off" class="layui-input"></div>' +
                            '<button type="button" id="edit-products-category-add-btn" class="layui-btn layui-btn-primary" ' +
                            'style="margin-top: 20px;width: 100px;background-color: #323232;color: #FFFFFF;">[[lang.common_add]]</button></div>' +
                            '</div></div></div>',
                        shade: 0,
                        area: ['370px', '150px'],
                        resize: false,
                        closeBtn: false,
                        success: function (layero, index) {
                            $('#basic_nav_search_close').on('click', function () {
                                layer.closeAll();
                            });

                            $('#edit-products-category-add-btn').on('click', function () {
                                var zhName = $('#add-category-zh-name').val()
                                var enName = $('#add-category-en-name').val()

                                if (zhName == "" || enName == "") {
                                    layer.msg('[[lang.common_complete_info]]', {icon: 4});
                                } else {
                                    var tmpLoad = layer.load(2)
                                    admin.req({
                                        method: "post",
                                        url: '/api/good/add!add_good_category',
                                        data: JSON.stringify({
                                            "NAME": $('#add-category-zh-name').val(),
                                            "EN_NAME": $('#add-category-en-name').val(),
                                            "langType": '[[lang_type]]'
                                        }),
                                        done: function (res) {
                                            layer.close(tmpLoad);
                                            if (res.data.code == 0) {
                                                layer.msg(res.msg, {icon: 1});
                                                $('#edit-product-category-select-id1').empty()
                                                $('#edit-product-category-select-id1').append(new Option('[[lang.products_select_category]]', ''));
                                                for (i = 0; i < res.data.goodCategories.length; i++) {
                                                    if ('[[lang_type]]' == 'zh_cn') {
                                                        $('#edit-product-category-select-id1').append(new Option(res.data.goodCategories[i].NAME, res.data.goodCategories[i].ID));
                                                    } else {
                                                        $('#edit-product-category-select-id1').append(new Option(res.data.goodCategories[i].EN_NAME, res.data.goodCategories[i].ID));
                                                    }
                                                }
                                                $('#edit-product-category-select-id1').append(new Option('[[lang.common_add]]', 'add'));
                                                {% if addition.login and current_user.ROLE != "USER" and current_user.ROLE != "AGENT" %}
                                                $('#edit-product-category-select-id1').append(new Option('[[lang.common_delete]]', 'del'));
                                                {% endif %}
                                                layui.form.render("select");
                                                $('.layui-form-select').css("border", "1px solid #575759");
                                                layer.closeAll();
                                            } else {
                                                layer.msg(res.msg, {icon: 2});
                                            }
                                        }
                                    });
                                }
                            });
                        }
                    });
                } else if (data.value == "del") {
                    deleteCategoryTy()
                }
            });

            layui.formSelects.on('size_select', function (id, vals, val, isAdd, isDisabled) {
                //id:           点击select的id
                //vals:         当前select已选中的值
                //val:          当前select点击的值
                //isAdd:        当前操作选中or取消
                //isDisabled:   当前选项是否是disabled
                //如果return false, 那么将取消本次操作
                if (val.value == "add") {
                    layer.open({
                        type: 1,
                        offset: 'auto',
                        title: false,
                        id: 'navSizeSelect',
                        content: '<div style="padding: 10px 25px;font-size: 14px;text-align: center"><div class="row self-a-link"><ul class="nav">' +
                            '<li class="nav-item" style="margin-top: 8px;" id="basic_nav_search_close">' +
                            '<i class="bi bi-x-lg" style="color: #0C0C0C"></i></li></ul></div>' +
                            '<div class="row"><div class="layui-inline">' +
                            '<div class="layui-input-inline" style="width: 100%;">' +
                            '<input type="text" id="add-size-name" placeholder="Size" autocomplete="off" class="layui-input"></div>' +
                            '<button type="button" id="edit-products-size-add-btn" class="layui-btn layui-btn-primary" ' +
                            'style="margin-top: 20px;width: 100px;background-color: #323232;color: #FFFFFF;">[[lang.common_add]]</button></div>' +
                            '</div></div></div>',
                        shade: 0,
                        area: ['370px', '150px'],
                        resize: false,
                        closeBtn: false,
                        success: function (layero, index) {
                            $('#basic_nav_search_close').on('click', function () {
                                layer.closeAll();
                            });

                            $('#edit-products-size-add-btn').on('click', function () {
                                var zhName = $('#add-size-name').val()

                                if (zhName == "") {
                                    layer.msg('[[lang.common_complete_info]]', {icon: 4});
                                } else {
                                    var tmpLoad = layer.load(2)
                                    admin.req({
                                        method: "post",
                                        url: '/api/good/add!add_good_size',
                                        data: JSON.stringify({
                                            "SIZE": $('#add-size-name').val(),
                                            "langType": '[[lang_type]]'
                                        }),
                                        done: function (res) {
                                            layer.close(tmpLoad);
                                            if (res.data.code == 0) {
                                                layer.msg(res.msg, {icon: 1});
                                                var sizeArr = new Array();
                                                {#sizeArr[0] = {"name": "[[lang.products_choose_size]]", "value": ""}#}
                                                for (i = 0; i < res.data.goodSizes.length; i++) {
                                                    sizeArr[i] = {
                                                        "name": res.data.goodSizes[i].SIZE,
                                                        "value": res.data.goodSizes[i].ID
                                                    }
                                                }
                                                sizeArr[res.data.goodSizes.length] = {
                                                    "name": "[[lang.common_add]]",
                                                    "value": "add"
                                                }
                                                {% if addition.login and current_user.ROLE != "USER" and current_user.ROLE != "AGENT" %}
                                                sizeArr[res.data.goodSizes.length + 1] = {
                                                    "name": "[[lang.common_delete]]",
                                                    "value": "del"
                                                }
                                                {% endif %}
                                                layui.formSelects.data('size_select', 'local', {
                                                    arr: sizeArr
                                                });
                                                layer.closeAll();
                                            } else {
                                                layer.msg(res.msg, {icon: 2});
                                            }
                                        }
                                    });
                                }
                            });
                        }
                    });
                } else if (val.value == "del") {
                    deleteGoodSizeTy()
                }
            });
            layui.formSelects.on('size_select1', function (id, vals, val, isAdd, isDisabled) {
                //id:           点击select的id
                //vals:         当前select已选中的值
                //val:          当前select点击的值
                //isAdd:        当前操作选中or取消
                //isDisabled:   当前选项是否是disabled
                //如果return false, 那么将取消本次操作
                if (val.value == "add") {
                    layer.open({
                        type: 1,
                        offset: 'auto',
                        title: false,
                        id: 'navSizeSelect1',
                        content: '<div style="padding: 10px 25px;font-size: 14px;text-align: center"><div class="row self-a-link"><ul class="nav">' +
                            '<li class="nav-item" style="margin-top: 8px;" id="basic_nav_search_close">' +
                            '<i class="bi bi-x-lg" style="color: #0C0C0C"></i></li></ul></div>' +
                            '<div class="row"><div class="layui-inline">' +
                            '<div class="layui-input-inline" style="width: 100%;">' +
                            '<input type="text" id="add-size-name" placeholder="Size" autocomplete="off" class="layui-input"></div>' +
                            '<button type="button" id="edit-products-size-add-btn" class="layui-btn layui-btn-primary" ' +
                            'style="margin-top: 20px;width: 100px;background-color: #323232;color: #FFFFFF;">[[lang.common_add]]</button></div>' +
                            '</div></div></div>',
                        shade: 0,
                        area: ['370px', '150px'],
                        resize: false,
                        closeBtn: false,
                        success: function (layero, index) {
                            $('#basic_nav_search_close').on('click', function () {
                                layer.closeAll();
                            });

                            $('#edit-products-size-add-btn').on('click', function () {
                                var zhName = $('#add-size-name').val()

                                if (zhName == "") {
                                    layer.msg('[[lang.common_complete_info]]', {icon: 4});
                                } else {
                                    var tmpLoad = layer.load(2)
                                    admin.req({
                                        method: "post",
                                        url: '/api/good/add!add_good_size',
                                        data: JSON.stringify({
                                            "SIZE": $('#add-size-name').val(),
                                            "langType": '[[lang_type]]'
                                        }),
                                        done: function (res) {
                                            layer.close(tmpLoad);
                                            if (res.data.code == 0) {
                                                layer.msg(res.msg, {icon: 1});
                                                var sizeArr = new Array();
                                                {#sizeArr[0] = {"name": "[[lang.products_choose_size]]", "value": ""}#}
                                                for (i = 0; i < res.data.goodSizes.length; i++) {
                                                    sizeArr[i] = {
                                                        "name": res.data.goodSizes[i].SIZE,
                                                        "value": res.data.goodSizes[i].ID
                                                    }
                                                }
                                                sizeArr[res.data.goodSizes.length] = {
                                                    "name": "[[lang.common_add]]",
                                                    "value": "add"
                                                }
                                                {% if addition.login and current_user.ROLE != "USER" and current_user.ROLE != "AGENT" %}
                                                sizeArr[res.data.goodSizes.length + 1] = {
                                                    "name": "[[lang.common_delete]]",
                                                    "value": "del"
                                                }
                                                {% endif %}
                                                layui.formSelects.data('size_select', 'local', {
                                                    arr: sizeArr
                                                });
                                                layer.closeAll();
                                            } else {
                                                layer.msg(res.msg, {icon: 2});
                                            }
                                        }
                                    });
                                }
                            });
                        }
                    });
                } else if (val.value == "del") {
                    deleteGoodSizeTy()
                }
            });

            var indexTempLoad;
            upload.render({
                url: '/api/common/upload!single_image_upload'
                , elem: '#edit-products-import-chart'
                , size: 20000
                , done: function (res) {
                    layer.close(indexTempLoad)
                    if (res.data.code == 0) {
                        layer.msg(res.msg, {icon: 1});
                        $('#edit-products-import-chart').html(res.data.originFileName)
                        $('#edit-products-import-chart').attr('data-sizeChart', res.data.url)
                    } else {
                        layer.msg(res.msg, {icon: 2});
                    }
                }, before: function (obj) {
                    indexTempLoad = layer.load(2)
                }
            });
            upload.render({
                url: '/api/common/upload!single_image_upload'
                , elem: '#edit-products-import-chart1'
                , size: 20000
                , done: function (res) {
                    layer.close(indexTempLoad)
                    if (res.data.code == 0) {
                        layer.msg(res.msg, {icon: 1});
                        $('#edit-products-import-chart1').html(res.data.originFileName)
                        $('#edit-products-import-chart1').attr('data-sizeChart', res.data.url)
                    } else {
                        layer.msg(res.msg, {icon: 2});
                    }
                }, before: function (obj) {
                    indexTempLoad = layer.load(2)
                }
            });

            $('#edit-product-add-range').on('click', function () {
                var temp = '<div class="layui-inline" style="margin-top: 5px;"><div class="layui-input-inline" style="width: 30%;">' +
                    '<input type="number" name="START_NUM" value="" autocomplete="off" class="layui-input" style="border-color: #575759">' +
                    '</div><div class="layui-form-mid">-</div><div class="layui-input-inline" style="width: 30%;">' +
                    '<input type="number" name="END_NUM" value="" autocomplete="off" class="layui-input" style="border-color: #575759">' +
                    '</div><div style="margin-top: 5px;" class="text-uppercase">[[lang.products_qty]]</div></div><div class="layui-inline" style="width: 100%;">' +
                    '<div class="layui-input-inline" style="width: 70%;margin-top: 5px;"><input type="number" name="RANGE_PRICE" value="" ' +
                    'class="form-control" style="border-color: #575759">' +
                    '</div><div style="margin-top: 10px;" class="text-uppercase">[[lang.products_price]]</div></div>'
                $('#edit-products-add-range-block').after(temp)
            });
            $('#edit-product-add-range1').on('click', function () {
                var temp = '<div class="input-group mb-3"><input type="number" class="form-control" name="START_NUM1" value="" style="border-color: #575759;">' +
                    '<span class="layui-form-mid">&nbsp;&nbsp;-</span><input type="number" class="form-control" name="END_NUM1" value="" style="border-color: #575759;">' +
                    '<span class="layui-form-mid">&nbsp;&nbsp;[[lang.products_qty]]</span></div><div class="input-group mb-3">' +
                    '<input type="number" class="form-control" name="RANGE_PRICE1" value="" style="border-color: #575759;width: 67%">' +
                    '<span class="layui-form-mid">&nbsp;&nbsp;[[lang.products_price]]</span></div>'
                $('#edit-products-add-range-block1').after(temp)
            });

            var successUrl = ''
            if ('[[data.productType]]' == 'DESIGN') {
                successUrl = 'designDiagrams'
            } else if ('[[data.productType]]' == 'REFERENCE') {
                successUrl = 'referenceDiagrams'
            } else {
                successUrl = 'commonSample'
            }
            function addProducts(btnType) {
                var brand = $('#product-brand').val()
                var color = $('#edit-product-color-select-id').val()
                var style = $('#product-style').val()
                var description = $('#product-description').val()
                var supplierColor = $('#product-supplier-color').val()
                var material = $('#product-material').val()
                var placeOfOrigin = $('#product-place-of-origin').val()
                var productNumber = $('#product-product-number').val()
                var factoryCode = $('#product-factory-code').val()
                var productArea = $('#edit-product-area-select-id').val()
                var staffEmail = $('#product-staff-email').val()
                var currency = $('#product-currency').val()
                var category = $('#edit-product-category-select-id').val()
                var size = layui.formSelects.value('size_select', 'valStr')
                var sizeChart = $('#edit-products-import-chart').attr('data-sizeChart')
                var prices = new Array();
                var goodImg = new Array();
                var referPrice = $('#product-refer-price').val()

                var startNum = document.getElementsByName("START_NUM");
                var endNum = document.getElementsByName("END_NUM");
                var rangePrice = document.getElementsByName("RANGE_PRICE");
                for (var i = 0; i < startNum.length; i++) {
                    if (startNum[i].value == '' && endNum[i].value == '' && rangePrice[i].value == '') {
                        continue
                    } else if (startNum[i].value != '' && endNum[i].value != '' && rangePrice[i].value != '') {
                        prices[i] = {
                            "START_NUM": startNum[i].value,
                            "END_NUM": endNum[i].value,
                            "PRICE": rangePrice[i].value
                        }
                    } else {
                        if ('[[lang_type]]' == 'zh_cn') {
                            layer.msg('价格区间的最低数量、最高数量和价格不允许残缺，可全空', {icon: 5, time: 5000});
                        } else {
                            layer.msg('The minimum quantity, maximum quantity and price of the price range are not allowed to be incomplete and can be completely empty', {
                                icon: 5,
                                time: 5000
                            });
                        }
                    }
                }

                $(".edit-product-add-img-img").each(function (i, e) {
                    goodImg[i] = $(this).attr('src')
                });

                if (brand == "" || color == "" || style == "" || description == "" || supplierColor == ""
                    || material == "" || placeOfOrigin == "" || productNumber == "" || factoryCode == ""
                    || productArea == "" || staffEmail == "" || currency == "" || category == ""
                    || size == "" || sizeChart == "" || (prices.length == 0 && '[[data.productType]]' == 'SAMPLE')
                    || (referPrice == "" && '[[data.productType]]' == 'REFERENCE') || goodImg.length == 0) {
                    layer.msg('[[lang.common_complete_info]]', {icon: 4, time: 5000});
                } else {
                    var tmpLoad = layer.load(2)
                    admin.req({
                        method: "post",
                        url: '/api/good/add!add_good',
                        data: JSON.stringify({
                            "USER_ID": '[[current_user.ID]]',
                            "TYPE": '[[addition.location]]',
                            "BRAND": brand,
                            "COLOR": color,
                            "STYLE": style,
                            "DESCRIPTION": description,
                            "SUPPLIER_COLOR": supplierColor,
                            "MATERIAL": material,
                            "PLACE_OF_ORIGIN": placeOfOrigin,
                            "PRODUCT_NUMBER": productNumber,
                            "FACTORY_CODE": factoryCode,
                            "AREA_ID": productArea,
                            "CURRENCY": currency,
                            "CATEGORY_ID": category,
                            "SIZE": size,
                            "SIZE_CHART": sizeChart,
                            "STAFF_EMAIL": staffEmail,
                            "IS_PUBLISHED": btnType,
                            "CLASS": '[[data.productType]]',
                            "PRICE_RANGE": prices,
                            "GOOD_IMG": goodImg,
                            "PRICE": referPrice,
                            "langType": '[[lang_type]]'
                        }),
                        done: function (res) {
                            layer.close(tmpLoad);
                            if (res.data.code == 0) {
                                layer.msg(res.msg, {icon: 1});
                                if (btnType == 0) {
                                    var tp = layer.load(2)
                                    setTimeout(function(){
                                        layer.close(tp);
                                    },5000);
                                    window.location.href = "/[[lang_type]][[addition.add]]/previewProducts?goodId=" + res.data.goodId
                                } else {
                                    var tp = layer.load(2)
                                    setTimeout(function(){
                                        layer.close(tp);
                                    },5000);
                                    window.location.href = "/[[lang_type]][[addition.add]]/" + successUrl
                                }
                            } else {
                                layer.msg(res.msg, {icon: 2});
                            }
                        }
                    });
                }
            }
            function addProducts1(btnType) {
                var brand = $('#product-brand1').val()
                var color = $('#edit-product-color-select-id1').val()
                var style = $('#product-style1').val()
                var description = $('#product-description1').val()
                var supplierColor = $('#product-supplier-color1').val()
                var material = $('#product-material1').val()
                var placeOfOrigin = $('#product-place-of-origin1').val()
                var productNumber = $('#product-product-number1').val()
                var factoryCode = $('#product-factory-code1').val()
                var productArea = $('#edit-product-area-select-id1').val()
                var staffEmail = $('#product-staff-email1').val()
                var currency = $('#product-currency1').val()
                var category = $('#edit-product-category-select-id1').val()
                var size = layui.formSelects.value('size_select1', 'valStr')
                var sizeChart = $('#edit-products-import-chart1').attr('data-sizeChart')
                var prices = new Array();
                var goodImg = new Array();
                var referPrice = $('#product-refer-price1').val()

                var startNum = document.getElementsByName("START_NUM1");
                var endNum = document.getElementsByName("END_NUM1");
                var rangePrice = document.getElementsByName("RANGE_PRICE1");
                for (var i = 0; i < startNum.length; i++) {
                    if (startNum[i].value == '' && endNum[i].value == '' && rangePrice[i].value == '') {
                        continue
                    } else if (startNum[i].value != '' && endNum[i].value != '' && rangePrice[i].value != '') {
                        prices[i] = {
                            "START_NUM": startNum[i].value,
                            "END_NUM": endNum[i].value,
                            "PRICE": rangePrice[i].value
                        }
                    } else {
                        if ('[[lang_type]]' == 'zh_cn') {
                            layer.msg('价格区间的最低数量、最高数量和价格不允许残缺，可全空', {icon: 5, time: 5000});
                        } else {
                            layer.msg('The minimum quantity, maximum quantity and price of the price range are not allowed to be incomplete and can be completely empty', {
                                icon: 5,
                                time: 5000
                            });
                        }
                    }
                }

                $(".edit-product-add-img-img").each(function (i, e) {
                    goodImg[i] = $(this).attr('src')
                });

                if (brand == "" || color == "" || style == "" || description == "" || supplierColor == ""
                    || material == "" || placeOfOrigin == "" || productNumber == "" || factoryCode == ""
                    || productArea == "" || staffEmail == "" || currency == "" || category == ""
                    || size == "" || sizeChart == "" || (prices.length == 0 && '[[data.productType]]' == 'SAMPLE')
                    || (referPrice == "" && '[[data.productType]]' == 'REFERENCE') || goodImg.length == 0) {
                    layer.msg('[[lang.common_complete_info]]', {icon: 4, time: 5000});
                } else {
                    var tmpLoad = layer.load(2)
                    admin.req({
                        method: "post",
                        url: '/api/good/add!add_good',
                        data: JSON.stringify({
                            "USER_ID": '[[current_user.ID]]',
                            "TYPE": '[[addition.location]]',
                            "BRAND": brand,
                            "COLOR": color,
                            "STYLE": style,
                            "DESCRIPTION": description,
                            "SUPPLIER_COLOR": supplierColor,
                            "MATERIAL": material,
                            "PLACE_OF_ORIGIN": placeOfOrigin,
                            "PRODUCT_NUMBER": productNumber,
                            "FACTORY_CODE": factoryCode,
                            "AREA_ID": productArea,
                            "CURRENCY": currency,
                            "CATEGORY_ID": category,
                            "SIZE": size,
                            "SIZE_CHART": sizeChart,
                            "STAFF_EMAIL": staffEmail,
                            "IS_PUBLISHED": btnType,
                            "CLASS": '[[data.productType]]',
                            "PRICE_RANGE": prices,
                            "GOOD_IMG": goodImg,
                            "PRICE": referPrice,
                            "langType": '[[lang_type]]'
                        }),
                        done: function (res) {
                            layer.close(tmpLoad);
                            if (res.data.code == 0) {
                                layer.msg(res.msg, {icon: 1});
                                if (btnType == 0) {
                                    var tp = layer.load(2)
                                    setTimeout(function(){
                                        layer.close(tp);
                                    },5000);
                                    window.location.href = "/[[lang_type]][[addition.add]]/previewProducts?goodId=" + res.data.goodId
                                } else {
                                    var tp = layer.load(2)
                                    setTimeout(function(){
                                        layer.close(tp);
                                    },5000);
                                    window.location.href = "/[[lang_type]][[addition.add]]/" + successUrl
                                }
                            } else {
                                layer.msg(res.msg, {icon: 2});
                            }
                        }
                    });
                }
            }

            $('#edit-product-preview-products').on('click', function () {
                addProducts(0)
            });
            $('#edit-product-preview-products1').on('click', function () {
                addProducts1(0)
            });

            $('#edit-product-publish-products').on('click', function () {
                addProducts(1)
            });
            $('#edit-product-publish-products1').on('click', function () {
                addProducts1(1)
            });

            upload.render({
                url: '/api/common/upload!single_image_upload'
                , elem: '#edit-product-add-img'
                , size: 20000
                , done: function (res) {
                    layer.close(indexTempLoad)
                    if (res.data.code == 0) {
                        layer.msg(res.msg, {icon: 1});
                        var temp = '<div class="row" style="position:relative;margin-top: 10px;">' +
                            '<img class="edit-product-add-img-img" src="' + res.data.url + '" style="width: 100%;">' +
                            '<span class="btn btn-block text-uppercase edit-product-add-img-delete" style="background-color: #323232;color: #FFFFFF;position: absolute;bottom: 50px;right: 30px;width: 80px;font-size: 7px;">[[lang.common_delete]]</span>' +
                            '<span class="btn btn-block text-uppercase edit-product-add-img-replace" style="background-color: #323232;color: #FFFFFF;position: absolute;bottom: 10px;right: 30px;width: 80px;font-size: 7px;">[[lang.common_replace]]</span></div>'
                        $('#edit-product-add-img-list').html($('#edit-product-add-img-list').html() + temp)

                        $('.edit-product-add-img-delete').on('click', function () {
                            $(this).parent('.row').remove();
                        });


                        upload.render({
                            url: '/api/common/upload!single_image_upload'
                            , elem: '.edit-product-add-img-replace'
                            , size: 20000
                            , done: function (res) {
                                layer.close(indexTempLoad)
                                if (res.data.code == 0) {
                                    layer.msg(res.msg, {icon: 1});
                                    {#var imgNode = $(this).siblings('.edit-product-add-img-img')#}
                                    this.item.siblings('.edit-product-add-img-img').attr('src', res.data.url)
                                } else {
                                    layer.msg(res.msg, {icon: 2});
                                }
                            }, before: function (obj) {
                                indexTempLoad = layer.load(2)
                            }
                        });
                    } else {
                        layer.msg(res.msg, {icon: 2});
                    }
                }, before: function (obj) {
                    indexTempLoad = layer.load(2)
                }
            });
            upload.render({
                url: '/api/common/upload!single_image_upload'
                , elem: '#display-img1-upload'
                , size: 20000
                , done: function (res) {
                    layer.close(indexTempLoad)
                    if (res.data.code == 0) {
                        layer.msg(res.msg, {icon: 1});
                        var temp1 = '<button type="button" class="carousel-index-btn-sub' + imgCount + '" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="' + imgCount + '"></button>'
                        var temp2 = '<div class="carousel-item carousel-index-btn-sub' + imgCount + '" style="position:relative;"><img src="' + res.data.url + '" class="d-block w-100 edit-product-add-img-img">' +
                            '<span data-imgCountAdd="' + imgCount + '" data-imgCount=".carousel-index-btn-sub' + imgCount + '" class="btn btn-block text-uppercase edit-product-add-img-delete" style="background-color: #323232;color: #FFFFFF;position: absolute;bottom: 50px;right: 15px;width: 80px;font-size: 7px;">[[lang.common_delete]]</span>' +
                            '<span class="btn btn-block text-uppercase edit-product-add-img-replace" style="background-color: #323232;color: #FFFFFF;position: absolute;bottom: 10px;right: 15px;width: 80px;font-size: 7px;">[[lang.common_replace]]</span></div>'
                        {#$('#edit-product-add-img-list1').html($('#edit-product-add-img-list1').html() + temp)#}

                        $('#carousel-index-btn').html($('#carousel-index-btn').html() + temp1)
                        $('#carousel-index-img').html($('#carousel-index-img').html() + temp2)

                        $('.edit-product-add-img-delete').on('click', function () {
                            if ($(this).attr('data-imgCountAdd') != (imgCount - 1)) {
                                layer.msg('[[lang.inner_small_screen_delete_img]]', {icon: 5});
                            } else {
                                $('#carousel-btn').trigger("click")
                                $($(this).attr('data-imgCount')).remove()
                                imgCount -= 1
                            }
                        });

                        $('.edit-product-add-img1').on('click', function () {
                            if ($(this).attr('data-tag-first') == 'yes') {
                                $('#display-img1-upload').trigger('click')
                            }
                        });

                        upload.render({
                            url: '/api/common/upload!single_image_upload'
                            , elem: '.edit-product-add-img-replace'
                            , size: 20000
                            , done: function (res) {
                                layer.close(indexTempLoad)
                                if (res.data.code == 0) {
                                    layer.msg(res.msg, {icon: 1});
                                    {#var imgNode = $(this).siblings('.edit-product-add-img-img')#}
                                    this.item.siblings('.edit-product-add-img-img').attr('src', res.data.url)
                                } else {
                                    layer.msg(res.msg, {icon: 2});
                                }
                            }, before: function (obj) {
                                indexTempLoad = layer.load(2)
                            }
                        });

                        imgCount += 1
                    } else {
                        layer.msg(res.msg, {icon: 2});
                    }
                }, before: function (obj) {
                    indexTempLoad = layer.load(2)
                }
            });


            $('.edit-product-add-img-delete').on('click', function () {
                $(this).parent('.row').remove();
            });
            $('.edit-product-add-img1').on('click', function () {
                if ($(this).attr('data-tag-first') == 'yes') {
                    $('#display-img1-upload').trigger('click')
                }
            });
        });
    </script>
{% endblock %}
